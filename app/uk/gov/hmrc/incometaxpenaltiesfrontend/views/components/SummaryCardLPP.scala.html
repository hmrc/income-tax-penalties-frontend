@*
 * Copyright 2025 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.incometaxpenaltiesfrontend.controllers
@import uk.gov.hmrc.incometaxpenaltiesfrontend.models.penaltyDetails.lpp.LPPPenaltyCategoryEnum.{LPP2, MANUAL}
@import uk.gov.hmrc.incometaxpenaltiesfrontend.viewModels.LatePaymentPenaltySummaryCard
@import uk.gov.hmrc.incometaxpenaltiesfrontend.views.html.components.Link
@import uk.gov.hmrc.incometaxpenaltiesfrontend.models.penaltyDetails.appealInfo.AppealStatusEnum
@import uk.gov.hmrc.incometaxpenaltiesfrontend.models.penaltyDetails.appealInfo.AppealLevelEnum

@this(
        govukSummaryList: GovukSummaryList,
        govukTag: GovukTag,
        link: Link
)

@(summaryCard: LatePaymentPenaltySummaryCard,isAgent:Boolean)(implicit messages: Messages)

<div class="govuk-summary-card">
    <div class="govuk-summary-card__title-wrapper">
        <h4 class="govuk-summary-card__title">
            @summaryCard.cardTitle
        </h4>
        <div id="lpp-status-@{summaryCard.index}">
            @govukTag(summaryCard.status)
        </div>
    </div>
    <div class="govuk-summary-card__content">
        @govukSummaryList(
            SummaryList(summaryCard.cardRows)
        )
    </div>
    <div id="lpp-actions-@{summaryCard.index}" class="govuk-summary-card__title-wrapper">
        @{
            if(summaryCard.penaltyCategory.equals(MANUAL)) {
                <span class="govuk-body">{messages("cardLinks.cannotAppeal")}</span>
            } else {
                <ul class="govuk-summary-card__actions">
                    {summaryCard.optCalculationDetailsLink(isAgent) match {
                        case Some(calculationDetailsLink) =>
                            <li class="govuk-summary-card__action no-border not-bold">
                                <a id={"lpp-view-calculation-link-" + summaryCard.index} class="govuk-link" href={calculationDetailsLink}>
                                    {messages("cardLinks.viewCalculation")}
                                </a>
                            </li>
                        case None =>
                    }}
                    {summaryCard.optAppealLink(isAgent) match {
                        case Some(appealLink) if summaryCard.isRejectedFirstStageAppeal =>
                            <li class="govuk-summary-card__action no-border not-bold">
                                <a id={"lpp-appeal-link-" + summaryCard.index} class="govuk-link" href={appealLink}>
                                        {messages("cardLinks.reviewAppeal")}
                                </a>
                            </li>
                        case Some(appealLink) =>
                            <li class="govuk-summary-card__action no-border not-bold">
                                <a id={"lpp-appeal-link-" + summaryCard.index} class="govuk-link" href={appealLink}>
                                    {messages("cardLinks.checkIfYouCanAppealThisPenalty")}
                                </a>
                            </li>
                        case None =>

                    }}
                </ul>
            }
        }
    </div>
</div>
